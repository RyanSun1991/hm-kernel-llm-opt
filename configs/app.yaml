includes:
  model_server: ./model_server.yaml
  workloads: ./workloads.yaml

project:
  name: hm-verif-kernel
  repo_path: /home/ryan/work/hmdev_rt/self_source/hm-verif-kernel/
  build_system: auto   # auto|make|cmake|bazel|custom
  # repos:
  #   - name: kernel-core
  #     repo_path: /path/to/hm-verif-kernel
  #     compile_commands_dir: /path/to/hm-verif-kernel
  #   - name: kernel-drivers
  #     repo_path: /path/to/hm-verif-kernel-drivers
  #     compile_commands_dir: /path/to/hm-verif-kernel-drivers

llm:
  provider: openai_compatible
  base_url: http://10.90.56.33:20010/v1
  api_key_env: $(HMOPT_LLM_API_KEY)
  model: glm-4.7
  embedding_model: qwen3-embedding-8b

storage:
  db:
    url: sqlite:///data/hmopt.db
  artifacts:
    root_dir: data/artifacts
  vector_store:
    type: local
    path: data/vector_store

profiling:
  enabled: true
  tools:
    - hitrace
    - hiperf
    - perf
    - flamegraph

pipelines:
  default: optimize_kernel

prompts:
  dir: configs/prompts
  profile: analysis
  profiles:
    analysis:
      conductor: conductor
      trace_analyst: trace_analyst
      query_code: query_code
      query_runtime: query_runtime
      query_graph: query_graph
      query_runtime_code: query_runtime_code
    patch:
      coder: coder
    review:
      review: code_review
  stage_profiles:
    coder: patch
    review: review
  overrides: {}
  review_enabled: false
  review_block_on_reject: false

indexing:
  enabled: true
  persist_dir: data/llamaindex
  code_index_root: data/llamaindex/code
  runtime_index_root: data/llamaindex/runtime
  code_index_version: null        # auto when null (uses git commit)
  runtime_index_version: null     # auto when null (uses run_id)
  versioning_scheme: git_commit   # git_commit|timestamp|custom
  include_dirty_suffix: true
  allow_legacy_paths: true
  index_registry_path: data/llamaindex/index_registry.json
  incremental_base_ref: HEAD~1
  incremental_mode: rebuild       # rebuild|merge
  incremental_max_changed_files: 5000
  llm_enrich: false
  llm_enrich_limit: 50
  runtime_evidence_max_chars: 20000
  hotspot_top_k: 20
  hotspot_min_ratio: 0.001
  hotspot_min_abs: 10.0
  query_code_top_k: 10
  query_runtime_top_k: 10
  query_graph_top_k: 3
  query_code_filter_top_k: 30
  query_runtime_symbol_top_k: 20
  query_runtime_path_top_k: 20
  clangd:
    enabled: true
    binary: clangd
    compile_commands_dir: /path/to/hm-verif-kernel
    extra_args: []
    timeout_sec: 10
    max_files: 50000
    symbol_kinds:
      - function
      - method
      - constructor
      - class
      - struct
      - enum
      - enum_member
      - interface
      - type_parameter
      - variable
      - constant
      - field
      - property
    call_hierarchy_enabled: true
    call_hierarchy_max_functions: 20000
    call_hierarchy_max_calls: 1000
    call_hierarchy_max_depth: 1
    usage_scan_enabled: true
    usage_scan_max_names: 20000
    relation_max_per_symbol: 2000
    file_summary_enabled: true
    relation_summary_enabled: true
    relation_summary_max_items: 500
  neo4j:
    enabled: true
    uri: bolt://10.123.104.98:7687
    user: neo4j
    password: '@huawei2026'
    database: neo4j
